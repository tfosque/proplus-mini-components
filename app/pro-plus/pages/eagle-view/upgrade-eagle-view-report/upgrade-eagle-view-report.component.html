<div
    class="grid-x grid-margin-x margin-top-small"
    *ngIf="stepper.selectedIndex === 0"
>
    <div class="cell small-12 medium-10 large-10">
        <img
            src="assets/images/Eagleview_logo.jpg"
            alt="Order Eagleview Report"
            class="logo"
        />
    </div>
    <div class="cell small-12 medium-2 large-2">
        <div>
            <h3>Order Summary</h3>
            <hr />
        </div>
        <div>{{ propertyAddress.street }}</div>
        <div>
            {{ propertyAddress.city }}, {{ propertyAddress.state }}
            {{ propertyAddress.zip }}
        </div>
        <div *ngIf="productPrimaryId === 44">
            <div class="text-bold">Property Type</div>
            <div>Residential</div>
        </div>
    </div>
    <div class="cell full-width"><hr /></div>
</div>
<mat-horizontal-stepper
    [linear]="isLinear"
    class="show-for-medium margin-top-small"
    #stepper
>
    <mat-step
        [stepControl]="addOnsFormGroup"
        *ngIf="availableAddOnReports.length > 0"
    >
        <form [formGroup]="addOnsFormGroup" #ngFormAddOns="ngForm">
            <ng-template matStepLabel>Add-on Report</ng-template>
            <div class="header">
                <h3>Do you want to include add-on report?</h3>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center with-margin">
                    <mat-checkbox
                        [(ngModel)]="selectedHasAddOnReport"
                        formControlName="hasAddOnReportControl"
                        (change)="addOnRptChange($event)"
                    >
                        Include add-on Report
                    </mat-checkbox>
                    <div
                        class="margin-left-large"
                        *ngIf="selectedHasAddOnReport"
                    >
                        <mat-radio-group
                            [(ngModel)]="selectedAddOnReport"
                            formControlName="addOnReportControl"
                            required
                        >
                            <div *ngFor="let addOnRpt of availableAddOnReports">
                                <mat-radio-button
                                    class="with-margin-radio full-width"
                                    [value]="addOnRpt.name"
                                >
                                    <div
                                        class="grid-x grid-margin-x full-width"
                                    >
                                        <div class="small-8 medium-10">
                                            {{ addOnRpt.name }}
                                        </div>
                                        <div
                                            class="small-4 medium-2 text-right"
                                        >
                                            ${{ addOnRpt.price }}
                                        </div>
                                    </div>
                                </mat-radio-button>
                            </div>
                        </mat-radio-group>
                        <div *ngIf="selectedHasAddOnReport">
                            <mat-error
                                class="cell small-12 medium-8 center with-margin"
                                *ngIf="
                                    ngFormAddOns.submitted &&
                                    addOnReportControl!.hasError('required')
                                "
                            >
                                Please select the add-on report(s) you want to
                                include
                            </mat-error>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center text-right">
                    <button
                        mat-button
                        [color]="isAccountClosed ? 'disabled' : 'primary'"
                        id="ev-addon-report-next"
                        [ngClass]="formatSelectedValue(selectedAddOnReport)"
                        matStepperNext
                        [disabled]="isAccountClosed"
                    >
                        Next
                    </button>
                </div>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="deliveryFormGroup">
        <form [formGroup]="deliveryFormGroup" #ngFormDelivery="ngForm">
            <ng-template matStepLabel>Delivery Option</ng-template>
            <div class="header">
                <h3>Select your delivery option</h3>
            </div>
            <div class="grid-x grid-margin-x">
                <mat-radio-group
                    class="cell small-12 medium-8 center with-margin"
                    [(ngModel)]="selectedDeliveryOption"
                    formControlName="deliveryControl"
                    required
                >
                    <div *ngFor="let option of availableDeliveryOptions">
                        <mat-radio-button
                            class="with-margin-radio full-width"
                            [value]="option.name"
                        >
                            <div class="text-bold">{{ option.name }}</div>
                            <div class="text-gray">
                                {{ option.description }}
                            </div>
                        </mat-radio-button>
                    </div>
                </mat-radio-group>
            </div>
            <div class="grid-x grid-margin-x">
                <mat-error
                    class="cell small-12 medium-8 center with-margin"
                    *ngIf="
                        ngFormDelivery.submitted &&
                        deliveryControl!.hasError('required')
                    "
                >
                    This field is required
                </mat-error>
            </div>
            <div class="grid-x grid-margin-x">
                <div
                    class="cell small-12 medium-8 center"
                    *ngIf="availableAddOnReports.length > 0; else noAddOn"
                >
                    <div class="grid-x grid-margin-x">
                        <div class="cell small-6 medium-6 center text-left">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-delivery-option-back"
                                matStepperPrevious
                                [disabled]="isAccountClosed"
                            >
                                Back
                            </button>
                        </div>
                        <div class="cell small-6 medium-6 center text-right">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-delivery-option-next"
                                [ngClass]="
                                    formatSelectedValue(selectedDeliveryOption)
                                "
                                matStepperNext
                                [disabled]="isAccountClosed"
                            >
                                Next
                            </button>
                        </div>
                    </div>
                </div>
                <ng-template #noAddOn>
                    <div class="cell small-12 medium-8 center text-right">
                        <button
                            mat-button
                            [color]="isAccountClosed ? 'disabled' : 'primary'"
                            id="ev-delivery-option-next"
                            [ngClass]="
                                formatSelectedValue(selectedDeliveryOption)
                            "
                            matStepperNext
                            [disabled]="isAccountClosed"
                        >
                            Next
                        </button>
                    </div>
                </ng-template>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="structuresFormGroup">
        <form [formGroup]="structuresFormGroup" #ngFormStructures="ngForm">
            <ng-template matStepLabel>Structures</ng-template>
            <div class="header">
                <h3>What structures do you want to measure?</h3>
            </div>
            <div class="grid-x grid-margin-x">
                <mat-radio-group
                    class="cell small-12 medium-8 center with-margin"
                    [(ngModel)]="selectedStructures"
                    formControlName="structuresControl"
                    required
                >
                    <div *ngFor="let structure of availableStructures">
                        <mat-radio-button
                            class="with-margin-radio"
                            [value]="structure.name"
                        >
                            <div>{{ structure.name }}</div>
                        </mat-radio-button>
                    </div>
                </mat-radio-group>
            </div>
            <div class="grid-x grid-margin-x">
                <mat-error
                    class="cell small-12 medium-8 center with-margin"
                    *ngIf="
                        ngFormStructures.submitted &&
                        structuresControl!.hasError('required')
                    "
                >
                    This field is required
                </mat-error>
            </div>
            <div class="grid-x grid-margin-x margin-top">
                <mat-form-field
                    class="cell small-12 medium-8 center with-margin"
                    floatLabel="auto"
                >
                    <textarea
                        placeholder="Special Instructions"
                        aria-label="Special Instructions"
                        matInput
                        formControlName="structuresInstructionControl"
                        [(ngModel)]="structuresInstruction"
                    ></textarea>
                </mat-form-field>
            </div>
            <div
                class="grid-x grid-margin-x"
                *ngIf="
                    selectedStructures &&
                    selectedStructures.substring(0, 5) === 'Other'
                "
            >
                <mat-error
                    class="cell small-12 medium-8 center with-margin"
                    *ngIf="
                        ngFormStructures.submitted &&
                        structuresInstructionControl!.hasError('required')
                    "
                >
                    This field is required
                </mat-error>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="cell small-6 medium-6 center text-left">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-structures-back"
                                matStepperPrevious
                                [disabled]="isAccountClosed"
                            >
                                Back
                            </button>
                        </div>
                        <div class="cell small-6 medium-6 center text-right">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-structures-next"
                                [ngClass]="
                                    formatSelectedValue(selectedStructures)
                                "
                                matStepperNext
                                [disabled]="isAccountClosed"
                            >
                                Next
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="additionalInfoFormGroup">
        <form
            [formGroup]="additionalInfoFormGroup"
            #ngFormAdditionalInfo="ngForm"
        >
            <ng-template matStepLabel>
                <div class="show-for-medium">Additional Information</div>
                <div class="show-for-small-only">Additional Info</div>
            </ng-template>
            <div class="header">
                <h3>
                    Any additional information you'd like to add?<br />(optional)
                </h3>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1">
                            <mat-icon>error</mat-icon>
                        </div>
                        <div class="small-10 medium-11 text-bold">
                            Claim Information (optional)
                        </div>
                    </div>
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1"></div>
                        <div class="small-10 medium-11 text-gray margin-bottom">
                            Add information for insurance purposes
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1"></div>
                        <mat-form-field
                            class="small-10 medium-11 with-margin"
                            floatLabel="auto"
                        >
                            <input
                                type="text"
                                placeholder="Claim Number"
                                aria-label="Claim Number"
                                matInput
                                formControlName="claimNumberControl"
                                [(ngModel)]="claimNumber"
                                maxlength="100"
                            />
                        </mat-form-field>
                    </div>
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1"></div>
                        <mat-form-field
                            class="small-10 medium-11 with-margin"
                            floatLabel="auto"
                        >
                            <input
                                type="text"
                                placeholder="Claim Information"
                                aria-label="Claim Information"
                                matInput
                                formControlName="claimInfoControl"
                                [(ngModel)]="claimInfo"
                                maxlength="100"
                            />
                        </mat-form-field>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1">
                            <mat-icon>alternate_email</mat-icon>
                        </div>
                        <div class="small-10 medium-11 text-bold">
                            Email Recipients (optional)
                        </div>
                    </div>
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1"></div>
                        <div class="small-10 medium-11 text-gray margin-bottom">
                            Share a copy of your report with your contacts
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div
                        class="grid-x grid-margin-x"
                        *ngIf="additionalInfoFormGroup.get('emailRecipients')"
                    >
                        <div class="small-2 medium-1"></div>
                        <div
                            formArrayName="emailRecipients"
                            class="small-10 medium-11"
                        >
                            <div
                                *ngFor="
                                    let email of additionalInfoFormGroup.get(
                                        'emailRecipients'
                                    )?.controls;
                                    let i = index
                                "
                                [formGroupName]="i"
                                class="grid-x grid-margin-x"
                            >
                                <mat-form-field
                                    class="small-6 medium-6 with-margin"
                                    floatLabel="auto"
                                >
                                    <input
                                        matInput
                                        formControlName="emailAddress"
                                        [errorStateMatcher]="matcher"
                                        placeholder="Email"
                                    />
                                    <mat-error
                                        *ngIf="
                                            email
                                                .get('emailAddress')!
                                                .hasError('email')
                                        "
                                    >
                                        Email address is invalid
                                    </mat-error>
                                </mat-form-field>
                                <div class="small-6 medium-6">
                                    <button
                                        mat-icon-button
                                        color="secondary"
                                        aria-label="Add"
                                        (click)="addEmailFormGroup()"
                                        matTooltip="Add"
                                    >
                                        <mat-icon>add_circle_outline</mat-icon>
                                    </button>
                                    <button
                                        mat-icon-button
                                        color="secondary"
                                        aria-label="Remove/clear"
                                        (click)="removeOrClearEmail(i)"
                                        matTooltip="Remove"
                                    >
                                        <mat-icon>highlight_off</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="cell small-6 medium-6 center text-left">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-additional-info-back"
                                matStepperPrevious
                                [disabled]="isAccountClosed"
                            >
                                Back
                            </button>
                        </div>
                        <div class="cell small-6 medium-6 center text-right">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-additional-info-next"
                                matStepperNext
                                [disabled]="isAccountClosed"
                            >
                                Next
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="orderReviewFormGroup">
        <form [formGroup]="orderReviewFormGroup" #ngFormOrderReview="ngForm">
            <ng-template matStepLabel>Review Order</ng-template>
            <div class="header">
                <h3>Review your order and pay</h3>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="small-12 medium-8 center bordered">
                    <div class="cell full-width with-margin-radio">
                        <div class="full-width text-bold">
                            {{ propertyAddress.street }}
                        </div>
                        <div class="full-width">
                            {{ propertyAddress.city }},
                            {{ propertyAddress.state }}
                            {{ propertyAddress.zip }}
                        </div>
                    </div>
                    <div
                        class="cell full-width bordered-top with-margin"
                        *ngIf="productPrimaryId === 44"
                    >
                        <div class="full-width text-gray margin-left">
                            Property
                        </div>
                        <div class="full-width margin-left">Residential</div>
                    </div>
                    <div class="cell full-width bordered-top with-margin">
                        <div class="full-width text-gray margin-left">
                            Report
                        </div>
                        <div class="full-width margin-left">Premium</div>
                        <div
                            class="full-width margin-left"
                            *ngIf="selectedHasAddOnReport"
                        >
                            Add-on Report: {{ getAddOnReports() }}
                        </div>
                    </div>
                    <div class="cell full-width bordered-top with-margin">
                        <div class="full-width text-gray margin-left">
                            Delivery
                        </div>
                        <div class="full-width margin-left">
                            {{ selectedDeliveryOption }}
                        </div>
                    </div>
                    <div class="cell full-width bordered-top with-margin">
                        <div class="full-width text-gray margin-left">
                            Structures
                        </div>
                        <div class="full-width margin-left">
                            {{ selectedStructures }}
                        </div>
                        <div
                            class="full-width margin-left"
                            *ngIf="structuresInstruction"
                        >
                            Special Instructions: {{ structuresInstruction }}
                        </div>
                    </div>
                    <div
                        class="cell full-width bordered-top with-margin"
                        *ngIf="claimNumber || claimInfo || emailItems"
                    >
                        <div class="full-width text-gray margin-left">
                            Additional Information
                        </div>
                        <div class="margin-left" *ngIf="claimNumber">
                            Claim Number: {{ claimNumber }}
                        </div>
                        <div class="margin-left" *ngIf="claimInfo">
                            Claim Information: {{ claimInfo }}
                        </div>
                        <div class="margin-left">
                            Email Recipients: {{ emailItems }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div
                    class="cell small-12 medium-8 margin-top-small margin-bottom center text-small"
                >
                    Beacon will send your report request to Eagleview. The cost
                    of the report will be charged to your Beacon account and you
                    will be invoiced for the final cost of the report.
                </div>
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="cell small-4 medium-3 center text-left">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-review-order-back"
                                matStepperPrevious
                                [disabled]="isAccountClosed"
                            >
                                Back
                            </button>
                        </div>
                        <div class="cell small-8 medium-9 center text-right">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-order-now"
                                (click)="orderReport()"
                                [disabled]="orderSubmitted || isAccountClosed"
                            >
                                Order Report Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </mat-step>
</mat-horizontal-stepper>

<mat-vertical-stepper
    [linear]="isLinear"
    class="show-for-small-only margin-top-small"
    #stepperMobile
>
    <mat-step
        [stepControl]="addOnsFormGroupMobile"
        *ngIf="availableAddOnReports.length > 0"
    >
        <form [formGroup]="addOnsFormGroupMobile" #ngFormAddOnsMobile="ngForm">
            <ng-template matStepLabel>Add-on Report</ng-template>
            <div class="header">
                <h3>Do you want to include add-on report?</h3>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center with-margin">
                    <mat-checkbox
                        [(ngModel)]="selectedHasAddOnReportMobile"
                        formControlName="hasAddOnReportControlMobile"
                        (change)="addOnRptChangeMobile($event)"
                    >
                        Include add-on Report
                    </mat-checkbox>
                    <div
                        class="margin-left-large"
                        *ngIf="selectedHasAddOnReportMobile"
                    >
                        <mat-radio-group
                            [(ngModel)]="selectedAddOnReportMobile"
                            formControlName="addOnReportControlMobile"
                            required
                        >
                            <div *ngFor="let addOnRpt of availableAddOnReports">
                                <mat-radio-button
                                    class="with-margin-radio full-width"
                                    [value]="addOnRpt.name"
                                >
                                    <div
                                        class="grid-x grid-margin-x full-width"
                                    >
                                        <div class="small-8 medium-10">
                                            {{ addOnRpt.name }}
                                        </div>
                                        <div
                                            class="small-4 medium-2 text-right"
                                        >
                                            ${{ addOnRpt.price }}
                                        </div>
                                    </div>
                                </mat-radio-button>
                            </div>
                        </mat-radio-group>
                        <div *ngIf="selectedHasAddOnReport">
                            <mat-error
                                class="cell small-12 medium-8 center with-margin"
                                *ngIf="
                                    ngFormAddOnsMobile.submitted &&
                                    addOnReportControlMobile!.hasError(
                                        'required'
                                    )
                                "
                            >
                                Please select the add-on report(s) you want to
                                include
                            </mat-error>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center text-right">
                    <button
                        mat-button
                        [color]="isAccountClosed ? 'disabled' : 'primary'"
                        id="ev-addon-report-next-mobile"
                        [ngClass]="
                            formatSelectedValue(selectedAddOnReportMobile)
                        "
                        matStepperNext
                        [disabled]="isAccountClosed"
                    >
                        Next
                    </button>
                </div>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="deliveryFormGroupMobile">
        <form
            [formGroup]="deliveryFormGroupMobile"
            #ngFormDeliveryMobile="ngForm"
        >
            <ng-template matStepLabel>Delivery Option</ng-template>
            <div class="header">
                <h3>Select your delivery option</h3>
            </div>
            <div class="grid-x grid-margin-x">
                <mat-radio-group
                    class="cell small-12 medium-8 center with-margin"
                    [(ngModel)]="selectedDeliveryOptionMobile"
                    formControlName="deliveryControlMobile"
                    required
                >
                    <div *ngFor="let option of availableDeliveryOptionsMobile">
                        <mat-radio-button
                            class="with-margin-radio full-width"
                            [value]="option.name"
                        >
                            <div class="text-bold">{{ option.name }}</div>
                            <div class="text-gray">
                                {{ option.description }}
                            </div>
                        </mat-radio-button>
                    </div>
                </mat-radio-group>
            </div>
            <div class="grid-x grid-margin-x">
                <mat-error
                    class="cell small-12 medium-8 center with-margin"
                    *ngIf="
                        ngFormDeliveryMobile.submitted &&
                        deliveryControlMobile!.hasError('required')
                    "
                >
                    This field is required
                </mat-error>
            </div>
            <div class="grid-x grid-margin-x">
                <div
                    class="cell small-12 medium-8 center"
                    *ngIf="availableAddOnReports.length > 0; else noAddOn"
                >
                    <div class="grid-x grid-margin-x">
                        <div class="cell small-6 medium-6 center text-left">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-delivery-option-back-mobile"
                                matStepperPrevious
                                [disabled]="isAccountClosed"
                            >
                                Back
                            </button>
                        </div>
                        <div class="cell small-6 medium-6 center text-right">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-delivery-option-next-mobile"
                                [ngClass]="
                                    formatSelectedValue(
                                        selectedDeliveryOptionMobile
                                    )
                                "
                                matStepperNext
                                [disabled]="isAccountClosed"
                            >
                                Next
                            </button>
                        </div>
                    </div>
                </div>
                <ng-template #noAddOn>
                    <div class="cell small-12 medium-8 center text-right">
                        <button
                            mat-button
                            [color]="isAccountClosed ? 'disabled' : 'primary'"
                            id="ev-delivery-option-next-mobile"
                            [ngClass]="
                                formatSelectedValue(
                                    selectedDeliveryOptionMobile
                                )
                            "
                            matStepperNext
                            [disabled]="isAccountClosed"
                        >
                            Next
                        </button>
                    </div>
                </ng-template>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="structuresFormGroupMobile">
        <form
            [formGroup]="structuresFormGroupMobile"
            #ngFormStructuresMobile="ngForm"
        >
            <ng-template matStepLabel>Structures</ng-template>
            <div class="header">
                <h3>What structures do you want to measure?</h3>
            </div>
            <div class="grid-x grid-margin-x">
                <mat-radio-group
                    class="cell small-12 medium-8 center with-margin"
                    [(ngModel)]="selectedStructuresMobile"
                    formControlName="structuresControlMobile"
                    required
                >
                    <div *ngFor="let structure of availableStructures">
                        <mat-radio-button
                            class="with-margin-radio"
                            [value]="structure.name"
                        >
                            <div>{{ structure.name }}</div>
                        </mat-radio-button>
                    </div>
                </mat-radio-group>
            </div>
            <div class="grid-x grid-margin-x">
                <mat-error
                    class="cell small-12 medium-8 center with-margin"
                    *ngIf="
                        ngFormStructuresMobile.submitted &&
                        structuresControlMobile!.hasError('required')
                    "
                >
                    This field is required
                </mat-error>
            </div>
            <div class="grid-x grid-margin-x margin-top">
                <mat-form-field
                    class="cell small-12 medium-8 center with-margin"
                    floatLabel="auto"
                >
                    <textarea
                        placeholder="Special Instructions"
                        aria-label="Special Instructions"
                        matInput
                        formControlName="structuresInstructionControlMobile"
                        [(ngModel)]="structuresInstructionMobile"
                    ></textarea>
                </mat-form-field>
            </div>
            <div
                class="grid-x grid-margin-x"
                *ngIf="
                    selectedStructures &&
                    selectedStructures.substring(0, 5) === 'Other'
                "
            >
                <mat-error
                    class="cell small-12 medium-8 center with-margin"
                    *ngIf="
                        ngFormStructuresMobile.submitted &&
                        structuresInstructionControlMobile!.hasError('required')
                    "
                >
                    This field is required
                </mat-error>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="cell small-6 medium-6 center text-left">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-structures-back-mobile"
                                matStepperPrevious
                                [disabled]="isAccountClosed"
                            >
                                Back
                            </button>
                        </div>
                        <div class="cell small-6 medium-6 center text-right">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-structures-next-mobile"
                                [ngClass]="
                                    formatSelectedValue(
                                        selectedStructuresMobile
                                    )
                                "
                                matStepperNext
                                [disabled]="isAccountClosed"
                            >
                                Next
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="additionalInfoFormGroupMobile">
        <form
            [formGroup]="additionalInfoFormGroupMobile"
            #ngFormAdditionalInfoMobile="ngForm"
        >
            <ng-template matStepLabel>
                <div class="show-for-medium">Additional Information</div>
                <div class="show-for-small-only">Additional Info</div>
            </ng-template>
            <div class="header">
                <h3>
                    Any additional information you'd like to add?<br />(optional)
                </h3>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1">
                            <mat-icon>error</mat-icon>
                        </div>
                        <div class="small-10 medium-11 text-bold">
                            Claim Information (optional)
                        </div>
                    </div>
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1"></div>
                        <div class="small-10 medium-11 text-gray margin-bottom">
                            Add information for insurance purposes
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1"></div>
                        <mat-form-field
                            class="small-10 medium-11 with-margin"
                            floatLabel="auto"
                        >
                            <input
                                type="text"
                                placeholder="Claim Number"
                                aria-label="Claim Number"
                                matInput
                                formControlName="claimNumberControlMobile"
                                [(ngModel)]="claimNumberMobile"
                                maxlength="100"
                            />
                        </mat-form-field>
                    </div>
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1"></div>
                        <mat-form-field
                            class="small-10 medium-11 with-margin"
                            floatLabel="auto"
                        >
                            <input
                                type="text"
                                placeholder="Claim Information"
                                aria-label="Claim Information"
                                matInput
                                formControlName="claimInfoControlMobile"
                                [(ngModel)]="claimInfoMobile"
                                maxlength="100"
                            />
                        </mat-form-field>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1">
                            <mat-icon>alternate_email</mat-icon>
                        </div>
                        <div class="small-10 medium-11 text-bold">
                            Email Recipients (optional)
                        </div>
                    </div>
                    <div class="grid-x grid-margin-x">
                        <div class="small-2 medium-1"></div>
                        <div class="small-10 medium-11 text-gray margin-bottom">
                            Share a copy of your report with your contacts
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div
                        class="grid-x grid-margin-x"
                        *ngIf="
                            additionalInfoFormGroupMobile.get(
                                'emailRecipientsMobile'
                            )
                        "
                    >
                        <div class="small-2 medium-1"></div>
                        <div
                            formArrayName="emailRecipientsMobile"
                            class="small-10 medium-11"
                        >
                            <div
                                *ngFor="
                                    let email of additionalInfoFormGroupMobile.get(
                                        'emailRecipientsMobile'
                                    )?.controls;
                                    let i = index
                                "
                                [formGroupName]="i"
                                class="grid-x grid-margin-x"
                            >
                                <mat-form-field
                                    class="small-6 medium-6 with-margin"
                                    floatLabel="auto"
                                >
                                    <input
                                        matInput
                                        formControlName="emailAddressMobile"
                                        [errorStateMatcher]="matcher"
                                        placeholder="Email"
                                    />
                                    <mat-error
                                        *ngIf="
                                            email
                                                .get('emailAddressMobile')!
                                                .hasError('email')
                                        "
                                    >
                                        Email address is invalid
                                    </mat-error>
                                </mat-form-field>
                                <div class="small-6 medium-6">
                                    <button
                                        mat-icon-button
                                        color="secondary"
                                        aria-label="Add"
                                        (click)="addEmailFormGroupMobile()"
                                        matTooltip="Add"
                                    >
                                        <mat-icon>add_circle_outline</mat-icon>
                                    </button>
                                    <button
                                        mat-icon-button
                                        color="secondary"
                                        aria-label="Remove/clear"
                                        (click)="removeOrClearEmailMobile(i)"
                                        matTooltip="Remove"
                                    >
                                        <mat-icon>highlight_off</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="cell small-6 medium-6 center text-left">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                matStepperPrevious
                                [disabled]="isAccountClosed"
                            >
                                Back
                            </button>
                        </div>
                        <div class="cell small-6 medium-6 center text-right">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                matStepperNext
                                [disabled]="isAccountClosed"
                            >
                                Next
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="orderReviewFormGroup">
        <form [formGroup]="orderReviewFormGroup" #ngFormOrderReview="ngForm">
            <ng-template matStepLabel>Review Order</ng-template>
            <div class="header">
                <h3>Review your order and pay</h3>
            </div>
            <div class="grid-x grid-margin-x">
                <div class="small-12 medium-8 center bordered">
                    <div class="cell full-width with-margin-radio">
                        <div class="full-width text-bold">
                            {{ propertyAddress.street }}
                        </div>
                        <div class="full-width">
                            {{ propertyAddress.city }},
                            {{ propertyAddress.state }}
                            {{ propertyAddress.zip }}
                        </div>
                    </div>
                    <div
                        class="cell full-width bordered-top with-margin"
                        *ngIf="productPrimaryId === 44"
                    >
                        <div class="full-width text-gray margin-left">
                            Property
                        </div>
                        <div class="full-width margin-left">Residential</div>
                    </div>
                    <div class="cell full-width bordered-top with-margin">
                        <div class="full-width text-gray margin-left">
                            Report
                        </div>
                        <div class="full-width margin-left">Premium</div>
                        <div
                            class="full-width margin-left"
                            *ngIf="selectedHasAddOnReportMobile"
                        >
                            Add-on Report: {{ getAddOnReportsMobile() }}
                        </div>
                    </div>
                    <div class="cell full-width bordered-top with-margin">
                        <div class="full-width text-gray margin-left">
                            Delivery
                        </div>
                        <div class="full-width margin-left">
                            {{ selectedDeliveryOptionMobile }}
                        </div>
                    </div>
                    <div class="cell full-width bordered-top with-margin">
                        <div class="full-width text-gray margin-left">
                            Structures
                        </div>
                        <div class="full-width margin-left">
                            {{ selectedStructuresMobile }}
                        </div>
                        <div
                            class="full-width margin-left"
                            *ngIf="structuresInstructionMobile"
                        >
                            Special Instructions:
                            {{ structuresInstructionMobile }}
                        </div>
                    </div>
                    <div
                        class="cell full-width bordered-top with-margin"
                        *ngIf="
                            claimNumberMobile ||
                            claimInfoMobile ||
                            emailItemsMobile
                        "
                    >
                        <div class="full-width text-gray margin-left">
                            Additional Information
                        </div>
                        <div class="margin-left" *ngIf="claimNumberMobile">
                            Claim Number: {{ claimNumberMobile }}
                        </div>
                        <div class="margin-left" *ngIf="claimInfoMobile">
                            Claim Information: {{ claimInfoMobile }}
                        </div>
                        <div class="margin-left">
                            Email Recipients: {{ emailItemsMobile }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="grid-x grid-margin-x">
                <div
                    class="cell small-12 medium-8 margin-top-small margin-bottom center text-small"
                >
                    Beacon will send your report request to Eagleview. The cost
                    of the report will be charged to your Beacon account and you
                    will be invoiced for the final cost of the report.
                </div>
                <div class="cell small-12 medium-8 center">
                    <div class="grid-x grid-margin-x">
                        <div class="cell small-4 medium-3 center text-left">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-review-order-back-mobile"
                                matStepperPrevious
                                [disabled]="isAccountClosed"
                            >
                                Back
                            </button>
                        </div>
                        <div class="cell small-8 medium-9 center text-right">
                            <button
                                mat-button
                                [color]="
                                    isAccountClosed ? 'disabled' : 'primary'
                                "
                                id="ev-order-now-mobile"
                                (click)="orderReportMobile()"
                                [disabled]="
                                    orderSubmittedMobile || isAccountClosed
                                "
                            >
                                Order Report Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </mat-step>
</mat-vertical-stepper>
